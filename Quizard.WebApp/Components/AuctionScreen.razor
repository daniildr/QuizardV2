@using Quizard.WebApp.Services
@inject GameService GameService
@inject ILogger<QuestionScreen> Logger

@if (GameService.PlayerBet is null)
{
    <div class="col-12 p-5">
        <div class="row text-start">
            <div class="col-4"></div>
            <div class="col-4">
                <div class="row ">
                    <div class="col p-4 question-auction-modal">
                        <div class="row">
                            <div class="col pt-4 pb-4 text-center question-auction-header">@GameService.Scenario.Localization.BetTime</div>
                        </div>
                        <div class="row">
                            <div class="col pt-4 pb-4 text-center question-auction-body" style="line-height: 50px">
                                @GameService.Scenario.Localization.MakeBetLabelPart1<br/> @GameService.Scenario.Localization.MakeBetLabelPart2
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-4"></div>
        </div>
    </div>
}
else
{
    <div class="col-12 p-5">
        <div class="row text-start">
            <div class="col-4"></div>
            <div class="col-4 position-relative">
                <div class="row ">
                    <div class="row"></div>
                    <div class="col p-4 question-auction-modal">
                        <div class="row">
                            <div class="col pt-4 pb-4 text-center question-auction-header">@GameService.Scenario.Localization.BetTime</div>
                        </div>
                        <div class="row">
                            <div class="col pt-4 pb-4 text-center question-auction-body" style="line-height: 50px">
                                @GameService.Scenario.Localization.BidAcceptedLabelPart1 @GameService.PlayerBet<br/> @GameService.Scenario.Localization.BidAcceptedLabelPart2
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-4"></div>
        </div>
    </div>
}

@code {
    protected override void OnInitialized()
    {
        GameService.OnChange += StateHasChanged;
        GameService.OnChange += HandleGameServiceChanged;
    }

    private void HandleGameServiceChanged()
    {
        if (GameService.Question != null)
        {
            GameService.OnChange -= HandleGameServiceChanged;
        }

        InvokeAsync(StateHasChanged);
    }
}